{"version":3,"sources":["Components/Timer/Timer.module.css","../node_modules/peerjs/dist sync","Components/Chat/Chat.module.css","Pages/Home/Home.js","Pages/Home/UserHome.js","Pages/SignIn/SignIn.js","Components/Timer/Timer.js","Components/Chat/Chat.js","Pages/TutoringRoom/TutoringRoom.js","App.js","reportWebVitals.js","index.js","Pages/TutoringRoom/TutoringRoom.module.css"],"names":["module","exports","webpackEmptyContext","req","e","Error","code","keys","resolve","id","Home","to","UserHome","navigate","useNavigate","useState","clientInfo","setClientInfo","username","localStorage","getItem","useEffect","console","log","axios","get","then","res","data","setItem","isTutor","catch","err","error","upcomingSessions","map","session","sessionId","onClick","Math","floor","random","SignIn","onSubmit","preventDefault","target","value","type","name","Timer","useStopwatch","autoStart","seconds","minutes","hours","className","styles","timer","Chat","clientName","messages","myMessage","setMyMessage","sendMessage","chat","messagesContainer","message","sender","messageContainer","otherMessageContainer","otherClientMessage","length","messageInputContainer","messageInput","placeholder","onChange","sendMessageBtn","sendIcon","fontSize","TutoringRoom","props","streamMyVideo","setStreamMyVideo","myVideoTrackStopped","setMyVideoTrackStopped","streamMyAudio","setStreamMyAudio","myAudioTrackStopped","setMyAudioTrackStopped","showOtherClientVideo","setShowOtherClientVideo","allPartiesJoined","setAllPartiesJoined","socketEventQueue","setSocketEventQueue","showTimer","setShowTimer","isSharingScreen","setIsSharingScreen","otherClientScreenSharing","setOtherClientScreenSharing","showColorPicker","setShowColorPicker","penColor","setPenColor","setMessages","latentVideoDisable","useRef","canvasRef","socket","peer","screenPeer","myVideo","keyRefs","otherClientName","otherClientVideo","myScreen","otherClientScreen","window","addEventListener","key","current","Object","undo","emit","prev","eventName","redo","io","on","_","srcObject","getVideoTracks","forEach","track","enabled","push","getAudioTracks","canvasPaths","loadPaths","shareScreenPeer","Peer","secure","host","port","location","path","call","answer","screen","destroy","navigator","mozGetUserMedia","mediaDevices","getUserMedia","webkitGetUserMedia","video","audio","stream","play","peerConnection","remoteStream","includes","disable","event","roomContainer","videoFeedsContainer","myVideoContainer","videoFeed","muted","ref","muteButton","size","stopVideoButton","getTracks","stop","getDisplayMedia","cursor","onended","handleShareScreen","alert","screenShareBtn","screenShareIcon","style","display","otherClientVideoContainer","autoPlay","myScreenContainer","canvas","height","innerHeight","strokeWidth","strokeColor","onStroke","otherScreenContainer","otherClientScreenVid","tools","tool","colorPicker","color","hex","presetColors","place","chatBtn","App","exact","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b7da899f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"timer\":\"Timer_timer__R3473\"};","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 152;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat\":\"Chat_chat__2f1FI\",\"messagesContainer\":\"Chat_messagesContainer__2ijDp\",\"messageInputContainer\":\"Chat_messageInputContainer__3HIdf\",\"messageInput\":\"Chat_messageInput__2FsBQ\",\"sendMessageBtn\":\"Chat_sendMessageBtn__sFt8h\",\"sendIcon\":\"Chat_sendIcon__1OaQ4\",\"messageContainer\":\"Chat_messageContainer__1Ekzm\",\"otherMessageContainer\":\"Chat_otherMessageContainer__3Xdt4\",\"sender\":\"Chat_sender__2nK1n\",\"message\":\"Chat_message__ICZ2J\",\"myMessage\":\"Chat_myMessage__331Zn\",\"otherClientMessage\":\"Chat_otherClientMessage__3wbWP\"};","import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\nexport default function Home() {\r\n    return (\r\n        <div>\r\n            <Link to=\"/\">Home</Link>\r\n            <Link to=\"/signin\">Sign In</Link>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport {useState, useEffect} from 'react'\r\nimport {useNavigate} from 'react-router-dom'\r\nimport axios from 'axios'\r\n\r\nexport default function UserHome() {\r\n\r\n    const navigate= useNavigate()\r\n\r\n    const [clientInfo, setClientInfo] = useState(null)\r\n    const username = localStorage.getItem('username')\r\n\r\n    useEffect(() => {\r\n        console.log(username)\r\n        axios.get(`https://osmolearn-dev.herokuapp.com/accounts/${username}`).then(res => {\r\n            console.log(res.data)\r\n            setClientInfo(res.data)\r\n            localStorage.setItem('isTutor', res.data.isTutor)\r\n        }).catch(err => console.error(err))\r\n        \r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            {clientInfo && clientInfo.upcomingSessions.map(session => \r\n                <div key={Math.floor(Math.random() * 100)}>\r\n                    <p>SessionId: {session.sessionId}</p>\r\n                    <button onClick={e => navigate(`/session/${session.sessionId}`)}>Join Session</button>\r\n                    <br/>\r\n                </div>)}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport {useNavigate} from 'react-router'\r\n\r\nexport default function SignIn() {\r\n    const navigate = useNavigate()\r\n    const handleSubmit = e => {\r\n        e.preventDefault()\r\n        const username = e.target.username.value\r\n        localStorage.setItem('username', username)\r\n        navigate('/dashboard')\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <form onSubmit={handleSubmit}>\r\n                <label>\r\n                    Username\r\n                    <input type=\"text\" name=\"username\"/>\r\n                </label>\r\n                <input type=\"submit\" value=\"Sign In\"/>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n","import styles from './Timer.module.css'\r\nimport {useStopwatch} from 'react-timer-hook'\r\n\r\nexport default function Timer() {\r\n    const {\r\n        seconds,\r\n        minutes,\r\n        hours\r\n      } = useStopwatch({autoStart: true})\r\n    return (\r\n        <div className={styles.timer}>\r\n            <p>{hours}:{minutes}:{seconds}</p>\r\n        </div>\r\n    )\r\n}\r\n","import styles from './Chat.module.css'\r\nimport {MdSend} from 'react-icons/md'\r\nimport {useEffect} from 'react'\r\n\r\nexport default function Chat({clientName, messages, myMessage, setMyMessage, sendMessage}) {\r\n\r\n    useEffect(() => {\r\n        console.log(messages)   \r\n    })\r\n\r\n    return (\r\n        <div className={styles.chat}>\r\n            <div className={styles.messagesContainer}>\r\n                {messages.map(message => {\r\n                    console.log(message)\r\n                    return (\r\n                        <>\r\n                        <div className={message.sender === clientName? styles.messageContainer: styles.otherMessageContainer}>\r\n                            <div className={styles.sender}>{message.sender}</div>\r\n                            <div key={message.message[0] + message.message[message.message.length - 1]} className={message.sender === clientName? styles.myMessage : styles.otherClientMessage}>\r\n                                <div className={styles.message}>{message.message}</div>\r\n                            </div>\r\n                        </div>\r\n                        </>\r\n                    )\r\n                })}\r\n            </div>\r\n            <div className={styles.messageInputContainer}>\r\n                <input className={styles.messageInput} type=\"text\" placeholder=\"Type a message here...\" value={myMessage} onChange={e => setMyMessage(e.target.value)}/>\r\n                <div onClick={sendMessage} className={styles.sendMessageBtn}>\r\n                    <MdSend className={styles.sendIcon} fontSize={25}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import styles from './TutoringRoom.module.css'\r\nimport {useState, useEffect, useRef} from 'react'\r\nimport axios from 'axios'\r\nimport Peer from 'peerjs';\r\nimport {io} from 'socket.io-client'\r\nimport {ReactSketchCanvas} from 'react-sketch-canvas';\r\nimport {MdScreenShare,MdStopScreenShare,MdOutlineColorLens,MdOutlineVideocam,MdOutlineVideocamOff} from 'react-icons/md'\r\nimport {GrRedo,GrUndo} from 'react-icons/gr'\r\nimport {BsEraser,BsPencilFill,BsMicMute,BsMic, BsChatDots} from 'react-icons/bs'\r\nimport Timer from '../../Components/Timer/Timer';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport {GithubPicker} from 'react-color'\r\nimport Chat from '../../Components/Chat/Chat';\r\n\r\nexport default function TutoringRoom(props) {\r\n    \r\n    // const [clientId, setClientId] = useState(null)\r\n    const [streamMyVideo, setStreamMyVideo] = useState(true)\r\n    const [myVideoTrackStopped, setMyVideoTrackStopped] = useState(false)\r\n    const [streamMyAudio, setStreamMyAudio] = useState(true)\r\n    const [myAudioTrackStopped, setMyAudioTrackStopped] = useState(false)\r\n    const [showOtherClientVideo, setShowOtherClientVideo] = useState(false)\r\n    const [allPartiesJoined, setAllPartiesJoined] = useState(false)\r\n    const [socketEventQueue, setSocketEventQueue] = useState([])\r\n    const [showTimer, setShowTimer] = useState(false)\r\n    const [isSharingScreen, setIsSharingScreen] = useState(false)\r\n    const [otherClientScreenSharing, setOtherClientScreenSharing] = useState(false)\r\n    const [showColorPicker, setShowColorPicker] = useState(false)\r\n    const [penColor, setPenColor] = useState('black')\r\n    const [messages, setMessages] = useState([])\r\n    const [myMessage, setMyMessage] = useState('')\r\n\r\n    const isTutor = localStorage.getItem('isTutor')\r\n    const clientName = localStorage.getItem('username')\r\n    const latentVideoDisable = useRef([])\r\n    const canvasRef = useRef()\r\n    const socket = useRef(null)\r\n    const peer = useRef(null)\r\n    const screenPeer = useRef(null)\r\n    const myVideo = useRef()\r\n    const keyRefs = useRef({})\r\n    const otherClientName = useRef(null)\r\n    const otherClientVideo = useRef()\r\n    const myScreen = useRef()\r\n    const otherClientScreen = useRef()\r\n\r\n    const callClient = () => {\r\n        var getUserMedia = navigator.mozGetUserMedia || navigator.mediaDevices.mozGetUserMedia || navigator.mediaDevices.getUserMedia || navigator.mediaDevices.webkitGetUserMedia;\r\n        getUserMedia({ video: true, audio: true }).then( (stream) => {\r\n            console.log(\"calling: \",otherClientName.current)\r\n            let call = peer.current.call(otherClientName.current, stream)\r\n            call.on('stream', remoteStream => {\r\n                setShowOtherClientVideo(true)\r\n                otherClientVideo.current.srcObject = remoteStream\r\n            })\r\n        }).catch(err => console.error(err))\r\n    }\r\n\r\n    const traceSketch = canvasPaths => {\r\n        if(socket.current){\r\n            allPartiesJoined ? socket.current.emit('draw', {sessionId:\"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\", canvasPaths: canvasPaths}) : \r\n                               setSocketEventQueue(prev => [...prev, {eventName: 'draw', data: {sessionId:\"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\", canvasPaths: canvasPaths}}])\r\n        }\r\n    }\r\n\r\n    const handleShareScreen = () => {\r\n        console.log(\"sharing screen\")\r\n        if(!isSharingScreen){\r\n            if(!screenPeer.current){\r\n                //If screenPeer wasn't already made before. This prevents the constant recreation of screen peer when reattempting to screenshare\r\n                const shareScreenPeer = new Peer(`${clientName}-video`, {\r\n                    secure: true,\r\n                    host: 'osmolearn-dev.herokuapp.com',\r\n                    port: window.location.port,\r\n                    path: '/callpeer'\r\n                })\r\n                screenPeer.current = shareScreenPeer\r\n                shareScreenPeer.on(\"open\", id => {\r\n                    shareScreenPeer.on(\"call\", call => {\r\n                        call.answer(null) //not going to provide a stream back in this case\r\n                        call.on(\"stream\", screen => {\r\n                            //Handle latent action by disabling the ability to screenshare when both parties aren't in (easier on me and server load)\r\n                            setOtherClientScreenSharing(true)\r\n                            otherClientScreen.current.srcObject = screen\r\n                            console.log(\"answered screenshare call and got screenshare data\")\r\n                        })\r\n                    })\r\n                })\r\n                socket.current.emit('screenshare', {sessionId: \"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\"}) //emitted only for first time sharing screen\r\n            }\r\n            navigator.mediaDevices.getDisplayMedia({video: {cursor: \"always\"}, audio: true})\r\n                                    .then(screen => {\r\n                                        screen.getVideoTracks()[0].onended = () => {\r\n                                            setIsSharingScreen(false)\r\n                                            // myScreen.current.srcObject.getTracks().forEach(track => track.stop())\r\n                                            socket.current.emit('end screenshare', {sessionId: \"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\"}) //used for setting states\r\n                                            if(screenPeer.current){\r\n                                                screenPeer.current.destroy()\r\n                                                screenPeer.current = null\r\n                                            }\r\n                                            myScreen.current = null\r\n                                        }\r\n                                        screenPeer.current.call(`${otherClientName.current}-video`, screen)\r\n                                        console.log(`called ${otherClientName.current}-video`)\r\n                                        setIsSharingScreen(true)\r\n                                        myScreen.current.srcObject = screen\r\n                                    }).catch(err => console.error(err))\r\n        } else {\r\n            //Shut down share screen and destroy screenPeer connection and set screenShare to null\r\n            setIsSharingScreen(false)\r\n            myScreen.current.srcObject.getTracks().forEach(track => track.stop())\r\n            socket.current.emit('end screenshare', {sessionId: \"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\"}) //used for setting states\r\n            if(screenPeer.current){\r\n                screenPeer.current.destroy()\r\n                screenPeer.current = null\r\n            }\r\n            myScreen.current = null\r\n        }\r\n    }\r\n\r\n    const loadKeyDownHandlers = () => {\r\n        window.addEventListener('keydown', e => {\r\n            if(e.key === 'Control' || e.key === 'z' || e.key === 'x'){\r\n                keyRefs.current[e.key] = e.key\r\n            }\r\n            if(Object.keys(keyRefs.current).length >= 2){\r\n                if(keyRefs.current['Control'] && keyRefs.current['z']){\r\n                    canvasRef.current.undo()\r\n                    allPartiesJoined ? socket.current.emit('undo', {sessionId: \"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\"}):\r\n                           setSocketEventQueue(prev => [...prev, {eventName: 'undo', data: {sessionId: \"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\"}}])\r\n\r\n                }\r\n                if(keyRefs.current['Control'] && keyRefs.current['x']){\r\n                    canvasRef.current.redo()\r\n                    allPartiesJoined ? socket.current.emit('redo', {sessionId: \"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\"}):\r\n                           setSocketEventQueue(prev => [...prev, {eventName: 'redo', data: {sessionId: \"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\"}}])\r\n                }\r\n            }\r\n        })\r\n\r\n        window.addEventListener('keyup', e => {\r\n            keyRefs.current = {}\r\n        })\r\n    }\r\n\r\n    const undoDrawing = () =>{\r\n        canvasRef.current.undo()\r\n        allPartiesJoined ? socket.current.emit('undo', {sessionId: \"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\"}):\r\n                           setSocketEventQueue(prev => [...prev, {eventName: 'undo', data: {sessionId: \"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\"}}])\r\n    }\r\n\r\n    const redoDrawing = () =>{\r\n        canvasRef.current.redo()\r\n        allPartiesJoined ? socket.current.emit('redo', {sessionId: \"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\"}):\r\n                           setSocketEventQueue(prev => [...prev, {eventName: 'redo', data: {sessionId: \"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\"}}])\r\n    }\r\n\r\n    const changePenColor = (color, event) => {\r\n        console.log('color change to:', color.hex)\r\n        setPenColor(color.hex)\r\n    }\r\n\r\n    const sendMessage = () => {\r\n        console.log(\"message:\", myMessage)\r\n        setMessages(prev => [...prev, {sender: clientName, message: myMessage}])\r\n        allPartiesJoined ? socket.current.emit('message', {sessionId: \"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\", message: myMessage}):\r\n                           setSocketEventQueue(prev => [...prev, {eventName: 'message', data: {sessionId: \"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\", message: myMessage}}])\r\n        setMyMessage('')\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        loadKeyDownHandlers()\r\n        socket.current = io(\"https://osmolearn-dev.herokuapp.com/\")\r\n        socket.current.emit('user connected', {sessionId:\"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\", name: clientName})\r\n\r\n        socket.current.on('disable other client video', _ => {\r\n            console.log(\"other client stopped their video feed\")\r\n            if(otherClientVideo.current.srcObject){\r\n                otherClientVideo.current.srcObject.getVideoTracks().forEach(track => track.enabled = false);\r\n            } else {\r\n                latentVideoDisable.current.push('video')\r\n            }\r\n        })\r\n        socket.current.on('enable other client video', _ => {\r\n            console.log(\"other client enabled their video feed\")\r\n            if(otherClientVideo.current.srcObject){\r\n                otherClientVideo.current.srcObject.getVideoTracks().forEach(track => track.enabled = true);\r\n            }\r\n        })\r\n        socket.current.on('disable other client audio', _ => {\r\n            console.log(\"other client stopped their audio feed\")\r\n            if(otherClientVideo.current.srcObject){\r\n                otherClientVideo.current.srcObject.getAudioTracks().forEach(track => track.enabled = false);\r\n            }else {\r\n                latentVideoDisable.current.push('audio')\r\n            }\r\n        })\r\n        socket.current.on('enable other client audio', _ => {\r\n            console.log(\"other client enabled their audio feed\")\r\n            if(otherClientVideo.current.srcObject){\r\n                otherClientVideo.current.srcObject.getAudioTracks().forEach(track => track.enabled = true);\r\n            }\r\n        })\r\n        socket.current.on('draw', canvasPaths => {\r\n            canvasRef.current.loadPaths(canvasPaths)\r\n        })\r\n\r\n        socket.current.on('screenshare', () => {\r\n            console.log(`Getting screenshare data`)\r\n            if(!screenPeer.current){\r\n                //If screenPeer wasn't already made before. This prevents the constant recreation of screen peer when reattempting to screenshare\r\n                const shareScreenPeer = new Peer(`${clientName}-video`, {\r\n                    secure: true,\r\n                    host: 'osmolearn-dev.herokuapp.com',\r\n                    port: window.location.port,\r\n                    path: '/callpeer'\r\n                })\r\n                screenPeer.current = shareScreenPeer\r\n                shareScreenPeer.on(\"open\", id => {\r\n                    shareScreenPeer.on(\"call\", call => {\r\n                        call.answer(null) //not going to provide a stream back in this case\r\n                        call.on(\"stream\", screen => {\r\n                            //Handle latent action by disabling the ability to screenshare when both parties aren't in (easier on me and server load)\r\n                            setOtherClientScreenSharing(true)\r\n                            otherClientScreen.current.srcObject = screen\r\n                            console.log(\"answered screenshare call and got screenshare data\")\r\n                        })\r\n                    })\r\n                })\r\n            }\r\n        })\r\n\r\n        socket.current.on('end screenshare', () => {\r\n            if(screenPeer.current){\r\n                screenPeer.current.destroy()\r\n                screenPeer.current = null\r\n            }\r\n            setOtherClientScreenSharing(false)\r\n            otherClientScreen.current = null\r\n        })\r\n\r\n        socket.current.on('undo', () => {\r\n            canvasRef.current.undo()\r\n        })\r\n\r\n        socket.current.on('redo', () => {\r\n            canvasRef.current.redo()\r\n        })\r\n\r\n        socket.current.on('message', message => {\r\n            console.log(message)\r\n            setMessages(prev => [...prev, {sender: otherClientName.current, message: message}]) //when I send message sender will be me\r\n        })\r\n\r\n        axios.get(`https://osmolearn-dev.herokuapp.com/call/${clientName}/07b799f3-8e4d-4c26-a4bd-d65b80ce83db`).then(res=> otherClientName.current = res.data)\r\n        .catch(err => console.error(err))\r\n\r\n        var getUserMedia = navigator.mozGetUserMedia || navigator.mediaDevices.mozGetUserMedia || navigator.mediaDevices.getUserMedia || navigator.mediaDevices.webkitGetUserMedia;\r\n        getUserMedia({ video: true, audio: true }).then(stream => {\r\n            myVideo.current.srcObject = stream;\r\n            myVideo.current.play();\r\n        }).catch(err => console.error(err))\r\n\r\n        if(!peer.current) {\r\n            const peerConnection = new Peer(clientName, {\r\n                secure: true,\r\n                host: 'osmolearn-dev.herokuapp.com',\r\n                port: window.location.port,\r\n                path: '/callpeer'\r\n            })\r\n            peer.current = peerConnection\r\n            peerConnection.on(\"open\", id => {\r\n                console.log(`${id} connected`)\r\n                // setClientId(id)\r\n                peerConnection.on(\"call\", call => {\r\n                    console.log(\"getting a call\")\r\n                    var getUserMedia = navigator.mozGetUserMedia || navigator.mediaDevices.mozGetUserMedia || navigator.mediaDevices.getUserMedia || navigator.mediaDevices.webkitGetUserMedia ;\r\n                    getUserMedia({ video: true, audio: true }).then((stream) => {\r\n                        call.answer(stream)\r\n    \r\n                        call.on('stream', remoteStream => {\r\n                            setShowOtherClientVideo(true)\r\n                            otherClientVideo.current.srcObject = remoteStream\r\n                            if(latentVideoDisable.current.includes('video')){\r\n                                console.log('latent disabling client video')\r\n                                otherClientVideo.current.srcObject.getVideoTracks().forEach(track => track.enabled = false);\r\n                            }\r\n                            if(latentVideoDisable.current.includes('audio')){\r\n                                console.log('latent disabling client audio')\r\n                                otherClientVideo.current.srcObject.getAudioTracks().forEach(track => track.enabled = false);\r\n                            }\r\n                        })\r\n                    }).catch(err => console.error(err))\r\n                })\r\n            })\r\n        }\r\n        console.log(peer.current)\r\n        socket.current.on('all clients connected', data => {\r\n            setAllPartiesJoined(true)\r\n            setShowTimer(true)\r\n            console.log(\"all clients connected\")\r\n            if(isTutor === \"true\"){\r\n                callClient(true)\r\n            }\r\n        })\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    //Handles disabling my own video\r\n    useEffect(() => {\r\n        //disable my video and send signal to other client to disable their video\r\n        if(myVideo.current !== null && !streamMyVideo){\r\n            myVideo.current.srcObject.getVideoTracks().forEach(track => track.enabled = !track.enabled);\r\n            allPartiesJoined? socket.current.emit('disable video', {sessionId:\"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\", disable: true}) :\r\n                              setSocketEventQueue(prev => [...prev, {eventName: 'disable video' , data: {sessionId:\"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\", disable: true}}])\r\n            setMyVideoTrackStopped(true)\r\n        }\r\n        //enable my video and send signal to other client to enable their video\r\n        if(myVideo.current !== null && streamMyVideo && myVideoTrackStopped){\r\n            myVideo.current.srcObject.getVideoTracks().forEach(track => track.enabled = !track.enabled);\r\n            allPartiesJoined? socket.current.emit('disable video', {sessionId:\"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\", disable: false}) :\r\n                              setSocketEventQueue(prev => [...prev, {eventName: 'disable video' , data: {sessionId:\"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\", disable: false}}])\r\n            setStreamMyVideo(true)\r\n            setMyVideoTrackStopped(false)\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [streamMyVideo])\r\n\r\n    //Handles disabling my own video\r\n    useEffect(() => {\r\n        //disable my video and send signal to other client to disable their video\r\n        if(myVideo.current !== null && !streamMyAudio){\r\n            allPartiesJoined? socket.current.emit('disable audio', {sessionId:\"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\", disable: true}) :\r\n                              setSocketEventQueue(prev => [...prev, {eventName: 'disable audio' , data: {sessionId:\"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\", disable: true}}])\r\n            setMyAudioTrackStopped(true)\r\n        }\r\n        //enable my video and send signal to other client to enable their video\r\n        if(myVideo.current !== null && streamMyAudio && myAudioTrackStopped){\r\n            allPartiesJoined? socket.current.emit('disable audio', {sessionId:\"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\", disable: false}) :\r\n                              setSocketEventQueue(prev => [...prev, {eventName: 'disable audio' , data: {sessionId:\"07b799f3-8e4d-4c26-a4bd-d65b80ce83db\", disable: false}}])\r\n            setStreamMyAudio(true)\r\n            setMyAudioTrackStopped(false)\r\n        }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [streamMyAudio])\r\n\r\n    useEffect(() => {\r\n        socketEventQueue.forEach(event => {\r\n            socket.current.emit(event.eventName, event.data)\r\n        })\r\n        //reset event queue in case one party leaves (will write code to emit signal when user leaves abruptly to properly set AllPartiesJoined to false)\r\n        setSocketEventQueue([])\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [allPartiesJoined])\r\n\r\n    return (\r\n        <div className={styles.roomContainer}>\r\n            <div className={styles.videoFeedsContainer}>\r\n                <div className={styles.myVideoContainer}>\r\n                    <video className={styles.videoFeed} muted ref={myVideo}/>\r\n                    <div>\r\n                        <div onClick={e => {setStreamMyAudio(!streamMyAudio)}} className={styles.muteButton}>\r\n                            {streamMyAudio? <BsMic size={30}/> : <BsMicMute size={30}/>}\r\n                        </div>\r\n                        <div onClick={e => {setStreamMyVideo(!streamMyVideo)}} className={styles.stopVideoButton}>\r\n                            {streamMyVideo? <MdOutlineVideocam size={30}/> : <MdOutlineVideocamOff size={30}/>}\r\n                        </div>\r\n                        <div onClick={e => allPartiesJoined? handleShareScreen() : alert(\"Can't share screen until both parties join\")} className={styles.screenShareBtn}>\r\n                            {isSharingScreen? <MdStopScreenShare className={styles.screenShareIcon} fontSize={30}/> : <MdScreenShare className={styles.screenShareIcon} fontSize={30}/>}\r\n                        </div>\r\n                    </div>\r\n                    <p className={styles.name}>{clientName}</p>\r\n                </div>\r\n                <div style={{display: showOtherClientVideo? 'block' : 'none'}} className={styles.otherClientVideoContainer}>\r\n                    <video className={styles.videoFeed} autoPlay ref={otherClientVideo}/>\r\n                    <p className={styles.otherClientName}>{otherClientName.current}</p>\r\n                </div>\r\n                {isSharingScreen && \r\n                <div className={styles.myScreenContainer}>\r\n                    <video className={styles.videoFeed} autoPlay ref={myScreen}/>\r\n                </div>}\r\n                {showTimer && <div className={styles.timer}><Timer/></div>}\r\n            </div>\r\n            <div className={styles.canvas}>\r\n                <ReactSketchCanvas\r\n                height={window.innerHeight}\r\n                strokeWidth={5}\r\n                strokeColor={penColor}\r\n                ref={canvasRef}\r\n                onStroke={traceSketch}\r\n                />\r\n            </div>\r\n            {otherClientScreenSharing && \r\n            <div className={styles.otherScreenContainer}>\r\n                <video className={styles.otherClientScreenVid} autoPlay ref={otherClientScreen}/>\r\n            </div>}\r\n            <div className={styles.tools}>\r\n                <div onClick={undoDrawing} data-delay-show='500' data-tip=\"undo\" data-for=\"undoTip\" className={styles.tool}>\r\n                    <GrUndo size={20}/>\r\n                </div>\r\n                <div onClick={redoDrawing} data-delay-show='500' data-tip=\"redo\" data-for=\"redoTip\" className={styles.tool}>\r\n                    <GrRedo size={20}/>\r\n                </div>\r\n                <div onClick={e => setShowColorPicker(!showColorPicker)} className={styles.tool}>\r\n                    <MdOutlineColorLens data-delay-show='500' data-tip=\"color\" data-for=\"colorTip\" size={20}/>\r\n                    {showColorPicker && <GithubPicker className={styles.colorPicker} onChange={changePenColor} presetColors={['#D0021B', '#F5A623', '#F8E71C', '#8B572A', '#7ED321', '#417505', '#BD10E0', '#9013FE', '#4A90E2', '#50E3C2', '#B8E986', '#000000', '#4A4A4A', '#9B9B9B', '#FFFFFF']}/>}\r\n                </div>\r\n                <div data-delay-show='500' data-tip=\"eraser\" data-for=\"eraserTip\" className={styles.tool}>\r\n                    <BsEraser size={20}/>\r\n                </div>\r\n                <div data-delay-show='500' data-tip=\"pencil\" data-for=\"pencilTip\" className={styles.tool}>\r\n                    <BsPencilFill size={20}/>\r\n                </div>\r\n                <ReactTooltip place='right' id=\"undoTip\">\r\n                    Undo\r\n                </ReactTooltip>\r\n                <ReactTooltip place='right' id=\"redoTip\">\r\n                    Redo\r\n                </ReactTooltip>\r\n                <ReactTooltip place='right' id=\"colorTip\">\r\n                    Change Pen Color\r\n                </ReactTooltip>\r\n                <ReactTooltip place='right' id=\"eraserTip\">\r\n                    Eraser\r\n                </ReactTooltip>\r\n                <ReactTooltip place='right' id=\"pencilTip\">\r\n                    Pencil\r\n                </ReactTooltip>\r\n            </div>\r\n            <Chat clientName={clientName} messages={messages} myMessage={myMessage} setMyMessage={setMyMessage} sendMessage={sendMessage}/>\r\n            <div className={styles.chatBtn}>\r\n                Chat &nbsp; <BsChatDots fontSize={20}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import './App.css';\nimport {BrowserRouter as Router, Routes, Route} from 'react-router-dom'\nimport Home from './Pages/Home/Home'\nimport UserHome from './Pages/Home/UserHome'\nimport SignIn from './Pages/SignIn/SignIn'\nimport TutoringRoom from './Pages/TutoringRoom/TutoringRoom';\n\n\nfunction App() {\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <Routes>\n          <Route exact path=\"/\" element={<Home/>}/>\n          <Route path=\"/signin\" element={<SignIn/>}/>\n          <Route path=\"/dashboard\" element={<UserHome/>}/>\n          <Route path=\"/session/:sessionId\" element={<TutoringRoom/>}/>\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"roomContainer\":\"TutoringRoom_roomContainer__1tat7\",\"videoFeedsContainer\":\"TutoringRoom_videoFeedsContainer__38V25\",\"myVideoContainer\":\"TutoringRoom_myVideoContainer__2kTlM\",\"otherClientVideoContainer\":\"TutoringRoom_otherClientVideoContainer__3Lv0e\",\"name\":\"TutoringRoom_name__2jX-_\",\"otherClientName\":\"TutoringRoom_otherClientName__Bmnvi\",\"videoFeed\":\"TutoringRoom_videoFeed__3Murp\",\"myScreenContainer\":\"TutoringRoom_myScreenContainer__3FfD8\",\"stopVideoButton\":\"TutoringRoom_stopVideoButton__az7wX\",\"muteButton\":\"TutoringRoom_muteButton__20EBJ\",\"screenShareBtn\":\"TutoringRoom_screenShareBtn__3GG_v\",\"canvas\":\"TutoringRoom_canvas__3YLT_\",\"otherScreenContainer\":\"TutoringRoom_otherScreenContainer__1PAlR\",\"otherClientScreenVid\":\"TutoringRoom_otherClientScreenVid__1Clbl\",\"tools\":\"TutoringRoom_tools__30AnB\",\"tool\":\"TutoringRoom_tool__2j91O\",\"colorPicker\":\"TutoringRoom_colorPicker__1hsDY\",\"timer\":\"TutoringRoom_timer__3c7dX\",\"chatBtn\":\"TutoringRoom_chatBtn__p_Gq8\"};"],"sourceRoot":""}